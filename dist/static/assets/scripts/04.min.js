angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(e,s){return function(){var i={};i.promises=[],i.delayPromise=null,i.durationPromise=null,i.delayJustFinished=!1,i.reset=function(s){i.minDuration=s.minDuration,i.promises=[],angular.forEach(s.promises,function(e){e&&!e.$cgBusyFulfilled&&r(e)}),0!==i.promises.length&&(i.delayJustFinished=!1,s.delay&&(i.delayPromise=e(function(){i.delayPromise=null,i.delayJustFinished=!0},parseInt(s.delay,10))),s.minDuration&&(i.durationPromise=e(function(){i.durationPromise=null},parseInt(s.minDuration,10)+(s.delay?parseInt(s.delay,10):0))))},i.isPromise=function(e){var s=e&&(e.then||e.$then||e.$promise&&e.$promise.then);return"undefined"!=typeof s},i.callThen=function(e,i,r){var n;e.then||e.$then?n=e:e.$promise?n=e.$promise:e.denodeify&&(n=s.when(e));var a=n.then||n.$then;a.call(n,i,r)};var r=function(e){if(!i.isPromise(e))throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise");-1===i.promises.indexOf(e)&&(i.promises.push(e),i.callThen(e,function(){e.$cgBusyFulfilled=!0,-1!==i.promises.indexOf(e)&&i.promises.splice(i.promises.indexOf(e),1)},function(){e.$cgBusyFulfilled=!0,-1!==i.promises.indexOf(e)&&i.promises.splice(i.promises.indexOf(e),1)}))};return i.active=function(){return i.delayPromise?!1:i.delayJustFinished?(i.delayJustFinished=!1,0===i.promises.length&&(i.durationPromise=null),i.promises.length>0):i.durationPromise?!0:i.promises.length>0},i}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(e,s,i,r,n){return{restrict:"A",link:function(a,t,o,l){var u=t.css("position");("static"===u||""===u||"undefined"==typeof u)&&t.css("position","relative");var c,d,p,m,g,y=n(),v={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait...",wrapperClass:"cg-busy cg-busy-animation"};angular.extend(v,i),a.$watchCollection(o.cgBusy,function(i){if(i||(i={promise:null}),angular.isString(i))throw new Error("Invalid value for cg-busy. cgBusy no longer accepts string ids to represent promises/trackers.");(angular.isArray(i)||y.isPromise(i))&&(i={promise:i}),i=angular.extend(angular.copy(v),i),i.templateUrl||(i.templateUrl=v.templateUrl),angular.isArray(i.promise)||(i.promise=[i.promise]),m||(m=a.$new()),m.$message=i.message,angular.equals(y.promises,i.promise)||y.reset({promises:i.promise,delay:i.delay,minDuration:i.minDuration}),m.$cgBusyIsActive=function(){return y.active()},c&&p===i.templateUrl&&g===i.backdrop||(c&&c.remove(),d&&d.remove(),p=i.templateUrl,g=i.backdrop,r.get(p,{cache:s}).success(function(s){if(i.backdrop="undefined"==typeof i.backdrop?!0:i.backdrop,i.backdrop){var r='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';d=e(r)(m),t.append(d)}var n='<div class="'+i.wrapperClass+' ng-hide" ng-show="$cgBusyIsActive()">'+s+"</div>";c=e(n)(m),angular.element(c.children()[0]).css("position","absolute").css("top",0).css("left",0).css("right",0).css("bottom",0),t.append(c)}).error(function(e){throw new Error("Template specified for cgBusy ("+i.templateUrl+") could not be loaded. "+e)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(e){"use strict";e.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\n\n   <div class="cg-busy-default-sign">\n\n      <div class="cg-busy-default-spinner">\n         <div class="bar1"></div>\n         <div class="bar2"></div>\n         <div class="bar3"></div>\n         <div class="bar4"></div>\n         <div class="bar5"></div>\n         <div class="bar6"></div>\n         <div class="bar7"></div>\n         <div class="bar8"></div>\n         <div class="bar9"></div>\n         <div class="bar10"></div>\n         <div class="bar11"></div>\n         <div class="bar12"></div>\n      </div>\n\n      <div class="cg-busy-default-text">{{$message}}</div>\n\n   </div>\n\n</div>')}]);